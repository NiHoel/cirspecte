<!DOCTYPE HTML>
<html lang="de">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="
          child-src blob:;
          connect-src http: https: file:;
          font-src 'self';
          frame-src 'none';
          default-src 'self' data:  'unsafe-eval';
          img-src data: blob: filesystem: 'self' http: https: *;
          manifest-src *;
          media-src *;
          object-src resource:;
          prefetch-src 'none';
          script-src 'self' 'unsafe-inline' 'unsafe-eval'  ;
          style-src 'self' 'unsafe-inline';
          ">
    <meta name="author" content="Nico Höllerich">
    <title>Cirspecte</title>

    <link rel="stylesheet" href="assets/css/pannellum.css" />
    <link rel="stylesheet" href="assets/css/leaflet.css" />
    <link rel="stylesheet" href="assets/css/L.Control.Layers.Tree.css" />
    <link rel="stylesheet" href="assets/css/leaflet.control.minimap.css" />
    <link rel="stylesheet" href="assets/css/MarkerCluster.css" />
    <link rel="stylesheet" href="assets/css/MarkerCluster.Default.css" />
    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/css/timeline.css" />
    <link rel="stylesheet" href="assets/css/select2.min.css">
    <link rel="stylesheet" href="assets/css/bootstrap-slider.min.css">
    <link rel="stylesheet" href="assets/css/jstree-default/style.css" />
    <link rel="stylesheet" href="assets/css/tempusdominus-bootstrap-3.min.css" />

    <link rel="stylesheet" href="assets/css/simple-bars.css" />
    <link rel="stylesheet" href="assets/css/styles.css" />
    <link rel="stylesheet" href="assets/css/mobile.css" />

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="assets/js/lib/platform.js"></script>

    <!-- <script src="https://maps.googleapis.com/maps/api/js" async defer></script> -->

    <script type="text/javascript" src="assets/js/init.js"></script>

    <script src="assets/js/lib/localforage.min.js"></script> <!-- for Leaflet.offline -->
    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="assets/js/lib/leaflet.js"></script>
    <script src="assets/js/Leaflet.control.minimap.js"></script>
    <script src="assets/js/lib/Leaflet.Path.drag.js"></script>
    <script src="assets/js/lib/Leaflet.offline.js"></script>
    <script src="assets/js/lib/L.Control.Layers.Tree.js"></script>
    <script src="assets/js/lib/leaflet.markercluster.js"></script>
    <script src="assets/js/lib/leaflet.markercluster.layersupport.js"></script>
    <script src="assets/js/lib/Leaflet.ImageOverlay.Rotated.js"></script>
    <script src="assets/js/lib/Leaflet.AccuratePosition.js"></script>
    <script src="assets/js/lib/Leaflet.GoogleMutant.js"></script>
    <script src="assets/js/lib/Bing.js"></script>
    <script src="assets/js/lib/esri-leaflet.js"></script>

    <script type="text/javascript" src="assets/js/lib/pannellum/src/js/libpannellum.js"></script>
    <script type="text/javascript" src="assets/js/lib/pannellum/src/js/pannellum.js"></script>

    <script type="text/javascript" src="assets/js/lib/jquery.min.js"></script>
    <script type="text/javascript" src="assets/js/lib/popper.js"></script>
    <script type="text/javascript" src="assets/js/lib/moment-with-locales.min.js"></script>
    <script type="text/javascript">
        // auto-detect language setting for date formatting
        moment.locale(window.navigator.userLanguage || window.navigator.language);
    </script>

    <script type="text/javascript" src="assets/js/lib/bootstrap.min.js"></script>
    <script type="text/javascript" src="assets/js/lib/select2.min.js"></script>
    <script type="text/javascript" src="assets/js/lib/bootstrap-slider.min.js"></script>
    <script type="text/javascript" src="assets/js/lib/tempusdominus-bootstrap-3.min.js"></script>
    <script type="text/javascript" src='assets/js/lib/knockout-3.4.2.js'></script>
    <script type="text/javascript" src="assets/js/lib/knockout.mapping-latest.js"></script>
    <script type="text/javascript" src="assets/js/lib/knockout.binding.dateTimePicker.js"></script>
    <script type="text/javascript" src="assets/js/lib/bootstrap-slider-knockout-binding.js"></script>

    <script type="text/javascript" src="assets/js/lib/priority-queue.min.js"></script>
    <script type="text/javascript" src="assets/js/lib/Rx.min.js"></script>
    <script type="text/javascript" src="assets/js/lib/Rx.webworker.min.js"></script>
    <script type="text/javascript" src="assets/js/lib/numeric.min.js"></script>
    <script type="text/javascript" src="assets/js/lib/exif.js"></script>
    <script type="text/javascript" src="assets/js/lib/clipboard.min.js"></script>

    <script type="text/javascript" src="assets/js/lib/geodesy/dms.js"></script>
    <script type="text/javascript" src="assets/js/lib/geodesy/vector3d.js"></script>
    <script type="text/javascript" src="assets/js/lib/geodesy/latlon-ellipsoidal.js"></script>
    <script type="text/javascript" src="assets/js/lib/geodesy/latlon-vincenty.js"></script>

    <script type="text/javascript" src="assets/js/lib/timeline.js"></script>
    <script type="text/javascript" src="assets/js/lib/jstree.js"></script>

    <script type="text/javascript" src="assets/js/config.js"></script>
    <script type="text/javascript" src="assets/js/model.js"></script>
    <script type="text/javascript" src="assets/js/configurator.js"></script>
    <script type="text/javascript" src="assets/js/logger.js"></script>
    <script type="text/javascript" src="assets/js/map.js"></script>
    <script type="text/javascript" src="assets/js/panorama.js"></script>
    <script type="text/javascript" src="assets/js/timeline.js"></script>
    <script type="text/javascript" src="assets/js/filesystem.js"></script>
    <script type="text/javascript" src="assets/js/util.js"></script>

    <script type="text/javascript" src="assets/js/groupEditor.js"></script>
    <script type="text/javascript" src="assets/js/navigation.js"></script>

    <script type="text/javascript" src="assets/js/common.js"></script>
    <script type="text/javascript" src="assets/js/mobile.js"></script>
    <script type="text/javascript" src="assets/js/commandHistory.js"></script>
    <script type="text/javascript" src="assets/js/persistence.js"></script>

</head>
<body>



    <!-- Sidebar -->
    <div id="sidebar-wrapper">
        <a href="#" id="sidebar-collapser" class="btn" title="Close the sidebar"
           onclick="$('#sidebar-wrapper').addClass('collapsed');$('#sidebar-expander').show()">
            <span class="glyphicon glyphicon-chevron-left"></span>
        </a>

        <div id="group-editor" class="tab-pane fade in active">

            <ul class="sidebar-nav">
                <li>
                    <div class="form" id="temporal-group-selector">
                        <label for="temporalGroupSelector" title="Forms a tour through time by connecting the shots from several timepoint tours.">Time Travel Tour</label><br />

                        <!-- .js-example-responsive must be initialized in javascript -->
                        <select type="select" class="form-control" id="temporalGroupSelector" data-live-search="true" data-show-subtext="true" name="temporalGroups"
                                data-bind="options: temporalGroups, optionsCaption: 'Select a time travel tour ...', optionsText: g => {return g.name;}, value: current.temporalGroup"></select>
                    </div>
                </li>
                <li>
                    <button class="btn btn-default" data-bind="click: () => {beginCreate(temporalGroup);}">
                        <span class="glyphicon glyphicon-plus"></span>
                    </button>
                    <span>
                        Create Tour
                    </span>
                </li>
                <li>
                    <button class="btn btn-default" data-bind="click: deleteCurrentTemporalGroup, enable: $root.current.temporalGroup">
                        <span class="glyphicon glyphicon-trash"></span>
                    </button>
                    <span>
                        Delete Tour
                    </span>
                </li>
                <li>
                    <button class="btn btn-default" data-bind="click: () => {addFiles($root.current.temporalGroup());}, enable: $root.current.temporalGroup">
                        <span class="glyphicon glyphicon-import"></span>
                    </button>
                    <span>
                        Add Panoramas
                    </span>
                </li>
                <li>
                    <div class="form" id="spatial-group-selector">
                        <label for="spatialGroupSelector" title="A timepoint tour aggregates several panoramas shot approximately at the same time. Forms a &quot;classical&quot; panorama tour.">Timepoint Tour</label><br />

                        <!-- .js-example-responsive must be initialized in javascript -->
                        <select type="select" class="form-control" id="spatialGroupSelector" data-live-search="true" data-show-subtext="true" name="spatialGroups"
                                data-bind="options: spatialGroups, optionsCaption: 'Select a timepoint tour ...', optionsText: g => {return g.superGroup.name + ': ' + g.name;}, value: current.spatialGroup, disable: $root.disabled"></select>


                    </div>
                </li>
                <li>
                    <button class="btn btn-default" data-bind="click: () => {beginCreate(spatialGroup);}">
                        <span class="glyphicon glyphicon-plus"></span>
                    </button>
                    <span>
                        Create Tour
                    </span>
                </li>
                <li>
                    <button class="btn btn-default" data-bind="click: deleteCurrentSpatialGroup, enable: $root.current.spatialGroup">
                        <span class="glyphicon glyphicon-trash"></span>
                    </button>
                    <span>
                        Delete Tour
                    </span>
                </li>
                <li>
                    <button class="btn btn-default" data-bind="click: () => {addFiles($root.current.spatialGroup());}, enable: $root.current.spatialGroup">
                        <span class="glyphicon glyphicon-import"></span>
                    </button>
                    <span>
                        Add Panoramas
                    </span>
                </li>
                <li data-bind="visible: $root.gpsCoordinates">
                    <button class="btn btn-default" data-bind="click: $root.createPlaceholder, enable: $root.current.spatialGroup">
                        <span class="glyphicon glyphicon-map-marker"></span>
                    </button>
                    <span title="Create a placeholder at your current location.">
                        Add GPS Location
                    </span>
                </li>
                <li>
                    <div class="form-group">
                        <label for="editing-mode-combobox" title="Select what happens when clicking on a point on the map. When drawing a polyline the endpoint of one line is automatically the start for the next line.">Editing Mode</label>
                        <select type="select" class="form-control" id="editingModeSelector" data-live-search="true" data-show-subtext="true" name="editingModes"
                                data-bind="options: editingModes, value: editingMode"></select>
                    </div>
                </li>

                <li>
                    <div class="checkbox">
                        <label for="group-edit-drag-current-vertex-checkbox">
                            <input type="checkbox" value="group-edit-drag-current-vertex" id="group-edit-drag-current-vertex-checkbox" data-bind="checked:dragCurrentVertex">Drag Vertex
                        </label>
                    </div>
                </li>
            </ul>

        </div>
        <!-- /#group-editor -->

    </div>
    <!-- /#sidebar-wrapper -->

    <div id="right-pane-wrapper">
        <div id="right-pane">
            <div id="topbar-wrapper" class="fixed">
                <div id="topbar">

                    <div id="topbar-nav">
                        <ul class="nav nav-pills">
                            <li title="Show sidebar" id="sidebar-expander" style="display:none;"><a href="#" class="btn topbar-nav-item" onclick="$('#sidebar-wrapper').removeClass('collapsed'); $('#sidebar-expander').hide()"><span class="glyphicon glyphicon-chevron-right"></span></a></li>
                            <li title="Save tour.json"><a href="#" id="save-workspace-as" class="btn topbar-nav-item"><span class="glyphicon glyphicon-save-file"></span></a></li>
                            <li title="Save workspace"><a href="#" id="save-workspace" class="btn topbar-nav-item" style="display:none"><span class="glyphicon glyphicon-save"></span></a></li>
                            <li title="Undo (Ctrl + Z)" id="undo-button" data-bind="css: { 'not-active': undoStackCount() == 0 }, click: undo"><a href="#" class="btn topbar-nav-item"><span class="glyphicon glyphicon-share-alt" style="transform:matrix(-0.9397,0.342,0.342,0.9397,0,0)"></span></a></li>
                            <li title="Redo (Ctrl + Y)" id="redo-button" data-bind="css: { 'not-active': redoStackCount() == 0 }, click: redo"><a href="#" class="btn topbar-nav-item"><span class="glyphicon glyphicon-share-alt" style="transform:rotate(20deg)"></span></a></li>
                            <li title="Open Settings"><a href="#" class="btn topbar-nav-item" data-toggle="modal" data-target="#settings-dialog"><span class="glyphicon glyphicon-cog"></span></a></li>
                            <li title="Open Help"><a href="#" class="btn topbar-nav-item" data-toggle="modal" data-target="#help-dialog"><span class="glyphicon glyphicon-question-sign"></span></a></li>
                            <li title="Open Errors">
                                <a href="#" class="btn topbar-nav-item" data-toggle="modal" data-target="#logs-dialog">
                                    <span class="glyphicon glyphicon-alert">                                  </span>
                                    <span id="log-count" class="badge" data-bind="visible: hasLogs, text: logCount"></span>
                                </a>
                            </li>
                        </ul>
                    </div>

                    <div id="navigation-header">
                        <div class="left">
                            <span class="glyphicon glyphicon-chevron-left" style="display: none"></span>
                            <span class="text" style="display: none"></span>
                        </div>
                        <div class="center">
                            <span class="text" style="display: none"></span>
                        </div>
                        <div class="right">
                            <span class="text" style="display: none"></span>
                            <span class="glyphicon glyphicon-chevron-right" style="display: none"></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Center Pane -->
            <div id="center-pane-wrapper">
                <div class="container-fluid" id="content">
                    <div id="panorama"></div>
                    <div class="widget-map">
                        <label id="widget-minimap-caption" style="display: none;">Satellit</label>
                        <div id="map"></div>
                    </div>

                </div>
            </div>
            <!-- /#center-pane-wrapper -->

            <div id="bottombar-wrapper" class="collapsed">
                <div title="Open Timeline" href="#" id="bottombar-expander" onclick="$('#bottombar-wrapper').removeClass('collapsed'); $('#bottombar-expander').hide()"><span class="glyphicon glyphicon-menu-up fill"></span></div>
                <div id="bottombar">
                    <a title="Close Timeline" href="#" id="bottombar-collapser" onclick="$('#bottombar-wrapper').addClass('collapsed'); $('#bottombar-expander').show()"><span class="glyphicon glyphicon-menu-down"></span></a>
                    <div id="timeline"></div>
                </div>
            </div>
        </div>
        <!-- /#right-pane -->
    </div>
    <!-- /#right-pane-wrapper -->
    <!-- #spatial-group-editor -->
    <div id="spatial-group-editor" class="modal fade" role="dialog" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">

                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <button type="button" class="help" data-toggle="modal" data-target="#help-dialog">?</button>
                    <h3 id="addDialogLabel">Timepoint Tour Editor</h3>
                </div>
                <div class="modal-body" style="overflow-y: unset">
                    <!-- style required for datetime widget to be properly displayed -->

                    <form class="form-horizontal" style="width: 100%" data-bind="with: $root.editable.spatialGroup">
                        <div class="control-group" style="width: 100%">
                            <label class="control-label" for="spatial-group-name">Name</label>
                            <input class="form-control" data-bind="value: name" type="text" id="spatial-group-name" placeholder="Group name">
                        </div>

                        <div class="control-group" style="width: 100%">
                            <label class="control-label" for="spatial-group-timeslot" title="The time the panoramas were shot. This determines the position on the timeline.">Timeslot</label>
                            <div class="controls">
                                <div class='input-group date' id='spatial-group-timeslot' data-bind="dateTimePicker: timeslot" data-target-input="nearest">
                                    <input type='text' class="form-control datetimepicker-input" data-target="#timeslot" />
                                    <span class="input-group-addon" data-target="#timeslot" data-toggle="datetimepicker">
                                        <span class="glyphicon glyphicon-calendar"></span>
                                    </span>
                                </div>
                            </div>
                        </div>

                        <div class="control-group" style="width: 100%">
                            <label class="control-label" for="spatial-group-superGroup" title="A time travel tour that aggregates several timepoint tours">Super tour</label>
                            <select class="form-control" id="spatial-group-superGroup" data-live-search="true" data-show-subtext="true" name="superGroup" placeholder="Select a super tour ..."
                                    data-bind="options: $root.temporalGroups, optionsCaption: 'Select a super tour ...', optionsText: g => {return g.name;}, value: superGroup"></select>

                        </div>




                        <h4 class="collapser collapsed" data-toggle="collapse" data-target="#advanced-settings-spatial-group">
                            <small>
                                <span class="glyphicon glyphicon-chevron-right"></span>
                                <span class="glyphicon glyphicon-chevron-down"></span>
                                Advanced settings
                            </small>
                        </h4>
                        <div class="collapse" id="advanced-settings-spatial-group">

                            <div class="control-group" style="width: 100%">
                                <label class="control-label" for="spatial-group-type" title="The type of tour determines which type of vertices can be placed in it">Type</label>
                                <select class="form-control" id="spatial-group-type" data-live-search="true" data-show-subtext="true" name="type"
                                        data-bind="options: $root.spatialGroupTypes, optionsText: t => {return t;}, value: type"></select>

                            </div>

                            <div class="control-group" style="width: 100%">
                                <label class="control-label" for="spatial-group-id" title="Unique identifier used to reference this tour">Identifier</label>
                                <input class="form-control" data-bind="value: id" type="text" id="spatial-group-id" placeholder="<Automatically generate>">
                            </div>

                            <div class="control-group" style="width: 100%">
                                <label class="control-label" for="spatial-group-description" title="[Optional]">Description</label>
                                <input class="form-control" data-bind="value: description" type="text" id="spatial-group-description" placeholder="Group description">
                            </div>

                            <div class="control-group" style="width: 100%">
                                <label class="control-label" for="spatial-group-path" title="[Optional] Specify the folder containing the images. Use slashes (/) to separate folders. Each vertex in the tour will store the path to the image relative to the folder specified here. Note: You cannot specify an absolute path here. The specified path is always relative to the folder you imported in the beginning.">Path</label>
                                <div class="controls">
                                    <div class='input-group'>
                                        <input class="form-control" data-bind="value: path" type="text" id="spatial-group-path" placeholder="Folder containing images">
                                        <div class="input-group-addon" data-bind="click: () => $root.selectPath()" id="spatial-group-path-selector" style="cursor:pointer">
                                            <span class="glyphicon glyphicon-folder-open"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="invalid-input" data-bind="visible: $root.errors.path() && $root.errors.path() != '', text: $root.errors.path">

                                </div>
                            </div>

                            <div class="control-group" style="width: 100%">
                                <label class="control-label" for="background" title="[Optional] The image displayed on the map behind the points and edges forming this timepoint tour">Background</label>
                                <select class="form-control" id="background" data-live-search="true" data-show-subtext="true" name="background" placeholder="Select a background ..."
                                        data-bind="options: $root.backgrounds, optionsCaption: 'Select a background ...', optionsText: g => {return g.label;}, value: background"></select>

                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button data-bind="click: createSpatialGroup" class="btn btn-primary" data-dismiss="modal">Create</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /#spatial-group-editor -->
    <!-- #temporal-group-editor -->
    <div id="temporal-group-editor" class="modal fade" role="dialog" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <button type="button" class="help" data-toggle="modal" data-target="#help-dialog">?</button>
                    <h3 id="addDialogLabel">Time Travel Tour Editor</h3>
                </div>
                <div class="modal-body">

                    <form class="form-horizontal" data-bind="with: editable.temporalGroup">
                        <div class="control-group" style="width: 100%">
                            <label class="control-label" for="temporal-group-name">Name</label>
                            <input class="form-control" data-bind="value: name" type="text" id="temporal-group-name" placeholder="Group name">
                        </div>

                        <div class="control-group" style="width: 100%">
                            <label class="control-label" for="autoConnectColocated">Panorama linking</label>
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <input data-bind="checked: autoConnectColocated" type="checkbox" id="autoConnectColocated">
                                </div>
                                <div class="input-group-addon">
                                    <label for="autoConnectColocate" title="Enables tolerance regarding the position of panoramas. If two panorams are not more than radius apart they are treated as shot at the same location. Then switching between them by using the timeline is possible.">Link panoramas in time within</label>
                                </div>
                                <input type="number" class="form-control" id="colocatedRadius" data-bind="value: colocatedRadius, enable: autoConnectColocated">
                                <div class="input-group-addon">
                                    <label for="colocatedRadius">meter(s)</label>
                                </div>
                            </div>
                        </div>

                        <h4 class="collapser collapsed" data-toggle="collapse" data-target="#advanced-settings-temporal-group">
                            <small>
                                <span class="glyphicon glyphicon-chevron-right"></span>
                                <span class="glyphicon glyphicon-chevron-down"></span>
                                Advanced settings
                            </small>
                        </h4>

                        <div class="collapse" id="advanced-settings-temporal-group">
                            <div class="control-group" style="width: 100%">
                                <label class="control-label" for="temporal-group-type" title="The type of tour determines how the selection of subgroups is handled">Type</label>
                                <select class="form-control" id="type" data-live-search="true" data-show-subtext="true" name="type"
                                        data-bind="options: $root.temporalGroupTypes, optionsText: t => {return t;}, value: type"></select>

                            </div>

                            <div class="control-group" style="width: 100%">
                                <label class="control-label" for="temporal-group-id" title="Unique identifier used to reference this tour">Identifier</label>
                                <input class="form-control" data-bind="value: id" type="text" id="temporal-group-id" placeholder="<Automatically generate>">
                            </div>

                            <div class="control-group" style="width: 100%">
                                <label class="control-label" for="temporal-group-description" title="[Optional]">Description</label>
                                <input class="form-control" data-bind="value: description" type="text" id="temporal-group-description" placeholder="Group description">
                            </div>

                            <div class="control-group" style="width: 100%">
                                <label class="control-label" for="temporal-group-superGroup" title="[Optional] The new tour will be a child of the selected one.">Super tour</label>
                                <select class="form-control" id="temporal-group-superGroup" data-live-search="true" data-show-subtext="true" name="superGroup" placeholder="Select a super tour ..."
                                        data-bind="options: $root.temporalGroups, optionsCaption: 'Select a super tour ...', optionsText: g => {return g.name;}, value: superGroup"></select>
                            </div>

                            <div class="control-group" style="width: 100%">
                                <label for="multiselect">Selection options</label>
                                <div class="input-group">
                                    <input data-bind="checked: multiselect" type="checkbox" id="multiselect" />
                                    <label for="multiselect" title="If unchecked, selecting a timepoint tour leads to deselecting all other timepoint tours that are direct children of the same time travel tour.">Enable multiselect</label>
                                </div>
                                <div class="input-group">
                                    <input class="custom-control-input" data-bind="checked: exclusiveTemporalSubgroups" type="checkbox" id="exclusiveTemporalSubgroups" />
                                    <label class="custom-control-label" for="exclusiveTemporalSubgroups" title="If checked, selecting a timepoint tour in one temporal subgroup will deselect all timepoint tours in all other temporal subgroups.">Enable exclusiveness of subgroups</label>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button data-bind="click: createTemporalGroup" class="btn btn-primary" data-dismiss="modal">Create</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /#temporal-group-editor -->
    <!-- #select-directory-dialog -->
    <div id="select-directory-dialog" class="modal fade" role="dialog" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div id="select-directory-dialog-header" class="modal-header">

                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <button type="button" class="help" data-toggle="modal" data-target="#help-dialog">?</button>
                    <h3 data-bind="visible: workspace">Select project directory</h3>
                    <h3 data-bind="visible: !workspace">Select a directory</h3>
                </div>
                <div class="modal-body">

                    <div>
                        <section id="workspace-droparea">
                            <div dropzone="" webkitdropzone="copy file:image/png file:image/gif file:image/jpeg file:application/json" class="centerall">
                                Drop directory here
                            </div>
                        </section>
                    </div>

                    <div class="btn-center-spaced">
                        <label class="btn btn-primary" id="workspace-directory-selector">
                            Open native file dialog
                        </label>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <!-- /#select-directory-dialog -->
    <!-- #webkit-select-workspace-dialog -->
    <div id="webkit-select-workspace-dialog" class="modal fade" role="dialog" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div id="webkit-select-workspace-dialog-header" class="modal-header">

                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <button type="button" class="help" data-toggle="modal" data-target="#help-dialog">?</button>
                    <h3>Select project directory</h3>
                </div>
                <div class="modal-body">

                    <div data-bind="visible: allowsDrop">
                        <section id="webkit-workspace-droparea">
                            <div dropzone="" webkitdropzone="copy file:image/png file:image/gif file:image/jpeg file:application/json" class="centerall">
                                Drop directory here
                            </div>
                        </section>
                    </div>

                    <div data-bind="visible: allowsDirectorySelect">
                        <label class="btn btn-primary btn-center-spaced" for="webkit-workspace-directory-selector">
                            <input id="webkit-workspace-directory-selector" type="file" style="display: none;" multiple directory webkitdirectory="">
                            Open native file dialog
                        </label>
                        <p></p>
                    </div>

                    <div data-bind="visible: !allowsDrop && !allowsDirectorySelect" style="display: none;">
                        <label class="btn btn-primary btn-center-spaced" for="webkit-workspace-files-selector">
                            <input id="webkit-workspace-files-selector" type="file" multiple style="display: none;">
                            Select files
                        </label>
                        <p>Select all files in project directory</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /#webkit-select-workspace-dialog -->
    <!-- #webkit-access-dialog -->
    <div id="webkit-access-dialog" class="modal fade" role="dialog" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div id="webkit-access-dialog-header" class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <button type="button" class="help" data-toggle="modal" data-target="#help-dialog">?</button>
                    <ul class="nav nav-tabs">
                        <li class="active"><a data-toggle="tab" href="#webkit-access-disk-tab">Disk</a></li>
                        <li><a data-toggle="tab" href="#webkit-access-browser-tab" data-bind="css:{'not-active': !hasEntries()}">Browser</a></li>
                    </ul>


                </div>
                <div class="modal-body">
                    <div class="tab-content">
                        <div id="webkit-access-disk-tab" class="tab-pane fade in active">
                            <div data-bind="if: name" class="form">
                                <label for="webkit-access-name">
                                    Please provide the following file:
                                </label>
                                <span data-bind="text: path"></span>
                                <div class="input-group">
                                    <input id="webkit-access-name" class="form-control" data-bind="value: name" readonly="readonly" type="text">
                                    <span class="input-group-btn">
                                        <button class="btn clipboard" type="button" data-clipboard-target="#webkit-access-name">
                                            <img src="assets/images/clippy.svg" alt="Copy to clipboard" width="13" style="margin-top: -3px; position: relative; top:3px;">
                                        </button>
                                    </span>
                                </div>
                            </div>
                            <div data-bind="ifnot: name">
                                <div data-bind="visible: !allowsFiles() && !multi()">
                                    Select a directory.
                                </div>
                                <div data-bind="visible: !allowsFiles() && multi()">
                                    Select one or more directories.
                                </div>
                                <div data-bind="visible: !allowsFolders() && !multi()">
                                    Select a file.
                                </div>
                                <div data-bind="visible: !allowsFolders() && multi()">
                                    Select one or more files.
                                </div>
                                <div data-bind="visible: allowsFiles() && allowsFolders() && !multi()">
                                    Select a file or directory.
                                </div>
                                <div data-bind="visible:  allowsFiles() && allowsFolders() && multi()">
                                    Select one or more files or directories.
                                </div>
                            </div>

                            <div data-bind="visible: allowsDrop && !name()">
                                <section id="webkit-droparea">
                                    <div dropzone="" webkitdropzone="copy file:image/png file:image/gif file:image/jpeg file:application/json" class="centerall">
                                        Drop here
                                    </div>
                                </section>
                            </div>

                            <div data-bind="visible: allowsDirectorySelect && allowsFolders()">
                                <label class="btn btn-primary btn-center-spaced" for="webkit-directory-selector">
                                    <input id="webkit-directory-selector" type="file" style="display: none;" multiple directory webkitdirectory="">
                                    Select directory
                                </label>
                            </div>

                            <div data-bind="visible: allowsMultiFileSelect && multi() && allowsFiles()">
                                <label class="btn btn-primary btn-center-spaced" for="webkit-files-selector">
                                    <input id="webkit-files-selector" type="file" multiple style="display: none;">
                                    Select files
                                </label>
                            </div>

                            <div data-bind="visible: !multi() && allowsFiles()">
                                <label class="btn btn-primary btn-center-spaced" for="webkit-file-selector">
                                    <input id="webkit-file-selector" type="file" style="display: none;">
                                    Select file
                                </label>
                            </div>
                        </div>

                        <!-- /#webkit-access-disk-tab -->

                        <div id="webkit-access-browser-tab" class="tab-pane fade">
                            <div id="webkit-access-browser-tab-jstree"></div>
                            <button data-bind="click: confirmSelection, enable: hasSelections" class="btn btn-primary" data-dismiss="modal">Confirm</button>

                        </div>
                        <!-- /#webkit-access-browser-tab -->
                    </div>
                    <!-- /.tab-content -->
                </div>

            </div>
        </div>
    </div>
    <!-- /#webkit-access-dialog -->
    <!-- #settings-dialog -->
    <div id="settings-dialog" class="modal fade" role="dialog" tabindex="-1" aria-hidden="true" style="display: none;">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div id="settings-dialog-header" class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <button type="button" class="help" data-toggle="modal" data-target="#help-dialog">?</button>
                    <h4>Settings</h4>
                    <ul class="nav nav-tabs">
                        <li class="active"><a data-toggle="tab" href="#settings-file-tab">File</a></li>
                        <li><a data-toggle="tab" href="#settings-view-tab">View</a></li>
                        <li><a data-toggle="tab" href="#settings-advanced-tab">Advanced</a></li>
                    </ul>
                </div>
                <div class="modal-body">
                    <div class="tab-content">
                        <!-- #settings-file-tab -->
                        <div id="settings-file-tab" class="tab-pane fade in active">
                            <div class="form-horizontal">
                                <div class="container-fluid">
                                    <div class="row">
                                        <div class="col-md-6" data-bind="with: map">
                                            <h4 class="text-center">Import</h4>
                                            <table class="table table-responsiv table-responsive-sm table-sm">
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            <div>
                                                                <button id="switch-workspace" class="btn btn-default" data-toggle="modal" data-target="#settings-dialog">
                                                                    <span class="glyphicon glyphicon-refresh"></span>
                                                                </button>
                                                                <label class="control-label" for="switch-workspace">Switch workspace</label>
                                                            </div>


                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <div>
                                                                <button id="import-workspace" class="btn btn-default" data-toggle="modal" data-target="#settings-dialog">
                                                                    <span class="glyphicon glyphicon-import"></span>
                                                                </button>
                                                                <label class="control-label" for="import-workspace">Import workspace</label>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                    <tr>

                                                        <td>
                                                            <div>
                                                                <button id="import-tour" class="btn btn-default" data-toggle="modal" data-target="#settings-dialog">
                                                                    <span class="glyphicon glyphicon-import"></span>
                                                                </button>
                                                                <label class="control-label" for="import-tour">Import external tour file</label>
                                                            </div>
                                                        </td>
                                                    </tr>

                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="col-md-6" data-bind="with: timeline">
                                            <h4 class="text-center">Export</h4>
                                            <table class="table">
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            <div>
                                                                <button id="backup-tour" class="btn btn-default" data-toggle="modal" data-target="#settings-dialog">
                                                                    <span class="glyphicon glyphicon-export"></span>
                                                                </button>
                                                                <label class="control-label" for="export-tour">Save backup copy of tour file</label>
                                                            </div>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>

                                    </div>
                                </div>


                                <div>

                                    <div class="checkbox">
                                        <label title="Equivalent to clicking the &quot;Set&quot; button next to selected items whenever (de-)selecting one." class="control-label" for="auto-save-selected-items-checkbox">
                                            <input type="checkbox" data-bind="checked: autoSaveSelectedItems" id="auto-save-selected-items-checkbox">
                                            Automatically save selected items
                                        </label>
                                    </div>


                                    <div class="checkbox" data-bind="visible: !platform.isBrowser">
                                        <label title="Load workspace which was open when the program was closed the last time." class="control-label" for="load-recent-workspace-checkbox">
                                            <input type="checkbox" data-bind="checked: loadRecentWorkspace" id="load-recent-workspace-checkbox">
                                            Load recent workspace
                                        </label>
                                    </div>

                                    <div class="control-group" style="width: 100%" data-bind="if: !platform.isBrowser">
                                        <div class="input-group">
                                            <div class="input-group-addon">
                                                <input type="checkbox" data-bind="checked: autoSave" id="autoSave-checkbox">
                                            </div>
                                            <div class="input-group-addon">
                                                <label for="tilePanoramas-checkbox">Save workspace every</label>
                                            </div>
                                            <input class="form-control" type="number" min="1" max="60" data-bind="value: autoSaveInterval, enable: autoSave" id="autoSaveInterval-input">
                                            <div class="input-group-addon">
                                                <label for="autoSaveInterval-input">minutes</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>

                        </div>
                        <!-- /#settings-file-tab -->
                        <!-- #settings-view-tab -->
                        <div id="settings-view-tab" class="tab-pane fade">
                            <div class="form-horizontal">
                                <div>
                                    <div class="checkbox" data-bind="visible: platform.isBrowser">
                                        <label class="control-label" for="fullscreen-checkbox">
                                            <input type="checkbox" data-bind="checked: fullscreen" id="fullscreen-checkbox">
                                            Fullscreen
                                        </label>
                                    </div>
                                    <div class="checkbox">
                                        <label class="control-label" for="aggregateItems-checkbox">
                                            <input type="checkbox" data-bind="checked: aggregateItems" id="aggregateItems-checkbox">
                                            Aggregate a stack of items in the timeline into one (range item).
                                        </label>
                                    </div>

                                    <div class="checkbox">
                                        <label title="If a new panorama is added, display it." class="control-label" for="auto-display-panorama-checkbox">
                                            <input type="checkbox" data-bind="checked: autoDisplayPanorama" id="auto-display-panorama-checkbox">
                                            Automatically load panorama when adding a file
                                        </label>
                                    </div>
                                    <div class="checkbox">
                                        <label title="Selecting a timepoint tour on the sidebar has the same effect as clicking the corresponding item in the timeline." class="control-label" for="show-group-on-editor-selection-checkbox">
                                            <input type="checkbox" data-bind="checked: showGroupOnEditorSelection" id="show-group-on-editor-selection-checkbox">
                                            Show tour on map when selecting it on the sidebar
                                        </label>
                                    </div>
                                    <div class="checkbox">
                                        <label class="control-label" for="autosave-startup-view-checkbox">
                                            <input type="checkbox" data-bind="checked: autoSaveStartupView" id="autosave-startup-view-checkbox">
                                            Update all initial view parameters when saving
                                        </label>
                                    </div>
                                    <div class="control-group" style="width: 100%;padding-top: 14px;" data-bind="visible: platform.hasGPSSensor">
                                        <label class="control-label" for="enableGPS-checkbox">GPS Sensor</label>
                                        <div class="checkbox" style="padding-bottom: 7px;padding-top: 0;">
                                            <label class="control-label" for="enableGPS-checkbox">
                                                <input type="checkbox" data-bind="checked: enableGPS" id="enableGPS-checkbox">
                                                Load panoramas based on location
                                            </label>
                                        </div>
                                        <div class="input-group">
                                            <div class="input-group-addon">
                                                <label for="requiredGPSAccuracy">
                                                    Require an accuracy below
                                                </label>
                                            </div>
                                            <input type="number" class="form-control" id="requiredGPSAccuracy" data-bind="value: requiredGPSAccuracy, enable: enableGPS">
                                            <div class="input-group-addon">
                                                <label for="requiredGPSAccuracy">
                                                    meter(s)
                                                </label>
                                                <span data-bind="text: '(current: ' + currentGPSAccuracy().toLocaleString(undefined, {maximumFractionDigits: 2}) + ')', visible: currentGPSAccuracy"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <hr>

                                <div class="container-fluid">
                                    <span>Pan and zoom and then click to save the following values.</span>

                                    <div class="row">
                                        <div class="col-md-6" data-bind="with: map">
                                            <h4 class="text-center">Map</h4>
                                            <table class="table table-responsiv table-responsive-sm table-sm">
                                                <tbody>
                                                    <tr>
                                                        <th scope="row">Initial center</th>
                                                        <td>
                                                            <button class="btn btn-primary" id="set-center-map-settings-button" data-bind="enable: !$root.autoSaveStartupView()">Set</button>
                                                            <button class="btn btn-primary" id="unset-center-map-settings-button" data-bind="enable: !!center() && !$root.autoSaveStartupView()">Unset</button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th scope="row">Initial zoom level</th>
                                                        <td>
                                                            <button class="btn btn-primary" id="set-zoom-map-settings-button" data-bind="enable: !$root.autoSaveStartupView()">Set</button>
                                                            <button class="btn btn-primary" id="unset-zoom-map-settings-button" data-bind="enable: !!zoom() && !$root.autoSaveStartupView()">Unset</button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th scope="row">Farthest zoom level</th>
                                                        <td>
                                                            <button class="btn btn-primary" id="set-minZoom-map-settings-button">Set</button>
                                                            <button class="btn btn-primary" id="unset-minZoom-map-settings-button" data-bind="enable: minZoom">Unset</button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th scope="row">Closest zoom level</th>
                                                        <td>
                                                            <button class="btn btn-primary" id="set-maxZoom-map-settings-button">Set</button>
                                                            <button class="btn btn-primary" id="unset-maxZoom-map-settings-button" data-bind="enable: maxZoom">Unset</button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th scope="row">Outer bounds of view</th>
                                                        <td>
                                                            <button class="btn btn-primary" id="set-maxBounds-map-settings-button">Set</button>
                                                            <button class="btn btn-primary" id="unset-maxBounds-map-settings-button" data-bind="enable: maxBounds">Unset</button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="col-md-6" data-bind="with: timeline">
                                            <h4 class="text-center">Timeline</h4>
                                            <table class="table">
                                                <tbody>
                                                    <tr>
                                                        <th scope="row">Initial start date</th>
                                                        <td>
                                                            <button class="btn btn-primary" id="set-start-timeline-settings-button" data-bind="enable: !$root.autoSaveStartupView()">Set</button>
                                                            <button class="btn btn-primary" id="unset-start-timeline-settings-button" data-bind="enable: !!start() && !$root.autoSaveStartupView()">Unset</button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th scope="row">Initial end date</th>
                                                        <td>
                                                            <button class="btn btn-primary" id="set-end-timeline-settings-button" data-bind="enable: !$root.autoSaveStartupView()">Set</button>
                                                            <button class="btn btn-primary" id="unset-end-timeline-settings-button" data-bind="enable: !!end() && !$root.autoSaveStartupView()">Unset</button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th scope="row">Minimum start date</th>
                                                        <td>
                                                            <button class="btn btn-primary" id="set-min-timeline-settings-button">Set</button>
                                                            <button class="btn btn-primary" id="unset-min-timeline-settings-button" data-bind="enable: min">Unset</button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th scope="row">Maximum end date</th>
                                                        <td>
                                                            <button class="btn btn-primary" id="set-max-timeline-settings-button">Set</button>
                                                            <button class="btn btn-primary" id="unset-max-timeline-settings-button" data-bind="enable: max">Unset</button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th scope="row">Selected items</th>
                                                        <td>
                                                            <button class="btn btn-primary" id="set-selections-timeline-settings-button" data-bind="enable: !$root.autoSaveStartupView()">Set</button>
                                                            <button class="btn btn-primary" id="unset-selections-timeline-settings-button" data-bind="enable: !!selections() && !$root.autoSaveStartupView() && !$root.autoSaveSelectedItems">Unset</button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="col-md-6" data-bind="with: panorama">
                                            <h4 class="text-center">Panorama</h4>
                                            <table class="table">
                                                <tbody>
                                                    <tr>
                                                        <th scope="row">Panorama initially displayed</th>
                                                        <td>
                                                            <button class="btn btn-primary" id="set-scene-panorama-settings-button" data-bind="enable: !$root.autoSaveStartupView()">Set</button>
                                                            <button class="btn btn-primary" id="unset-scene-panorama-settings-button" data-bind="enable: !!scene() && !$root.autoSaveStartupView()">Unset</button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th scope="row">Initial yaw</th>
                                                        <td>
                                                            <button class="btn btn-primary" id="set-yaw-panorama-settings-button" data-bind="enable: !$root.autoSaveStartupView()">Set</button>
                                                            <button class="btn btn-primary" id="unset-yaw-panorama-settings-button" data-bind="enable: !!yaw() && !$root.autoSaveStartupView()">Unset</button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th scope="row">Initial pitch</th>
                                                        <td>
                                                            <button class="btn btn-primary" id="set-pitch-panorama-settings-button" data-bind="enable: !$root.autoSaveStartupView()">Set</button>
                                                            <button class="btn btn-primary" id="unset-pitch-panorama-settings-button" data-bind="enable: !!pitch() && !$root.autoSaveStartupView()">Unset</button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <th scope="row">Initial horizontal field of view</th>
                                                        <td>
                                                            <button class="btn btn-primary" id="set-hfov-panorama-settings-button" data-bind="enable: !$root.autoSaveStartupView()">Set</button>
                                                            <button class="btn btn-primary" id="unset-hfov-panorama-settings-button" data-bind="enable: !!hfov() && !$root.autoSaveStartupView()">Unset</button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <!-- /#settings-view-tab -->
                        <!-- #settings-advanced-tab -->
                        <div id="settings-advanced-tab" class="tab-pane fade">
                            <div class="form-horizontal">
                                <div>
                                    <button id="vertex-template-settings" class="btn btn-default" data-toggle="modal" data-target="#vertex-template-settings-dialog">
                                        <span class="glyphicon glyphicon-pencil"></span>
                                    </button>
                                    <label class="control-label" for="vertex-template-settings">Edit options for batch copying and panorama import when attributes of current panorama are copied.</label>
                                </div>
                                <div class="checkbox">
                                    <label title="Applies the copy vertex options with currently shown panorama as source and new panorama as destination. Triggered by &quot;Add Panoramas&quot;" class="control-label" for="copy-scene-attributes-checkbox">
                                        <input type="checkbox" data-bind="checked: copySceneAttributes" id="copy-scene-attributes-checkbox">
                                        Copy attributes of current panorama when importing files
                                    </label>
                                </div>

                                <div class="checkbox">
                                    <label class="control-label" for="create-placeholders-checkbox">
                                        <input type="checkbox" data-bind="checked: createVertexOnMapClick" id="create-placeholders-checkbox">
                                        Create point when clicking on the map (type depends on editor opened in the left panel)
                                    </label>
                                </div>
                                <div class="checkbox">
                                    <label title="Landmark vertices are saved to tour.json. Moreover they are not deleted, when switching the panorama." class="control-label" for="persist-landmarks-checkbox">
                                        <input type="checkbox" data-bind="checked: persistLandmarks" id="persist-landmarks-checkbox">
                                        Persist landmarks
                                    </label>
                                </div>

                            </div>

                        </div>
                        <!-- /#settings-advanced-tab -->
                    </div>
                    <!-- /.tab-content -->
                </div>

            </div>
        </div>
    </div>
    <!-- /#settings-dialog -->
    <!-- #logs-dialog -->
    <div id="logs-dialog" class="modal fade" role="dialog" tabindex="-1" aria-hidden="true" style="display: none;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4>Logs</h4>
                </div>
                <div class="modal-body" style="max-height: calc(100vh - 200px);  overflow-y: auto;">
                    <div data-bind="foreach: logs">
                        <div class="alert" data-bind="css:{'alert-danger' : ($data instanceof error), 'alert-warning' : ($data instanceof warning)}">
                            <span data-bind="text: logger.errorToString($data)"></span>
                            <a href="#" class="close" data-dismiss="alert" aria-label="close" data-bind="click: () => {$parent.logs.remove($data)}">&times;</a>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button data-bind="click: clear, visible: hasLogs" class="btn btn-primary" data-dismiss="modal">Clear</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /#logs-dialog -->
    <!-- #help-dialog -->
    <div id="help-dialog" class="modal fade" role="dialog" tabindex="-1" aria-hidden="true" style="display: none;">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-body" style="max-height: calc(100vh - 70px);  overflow-y: auto;">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h3>Content</h3>
                    <ol>
                        <li><a href="#help-dialog-import">Importing Project</a></li>
                        <li><a href="#help-dialog-navigation">Navigation Elements</a></li>
                        <li><a href="#help-dialog-workflow">Creating and modifying tours</a></li>
                        <li><a href="#help-dialog-temporal-groups">Time Travel Tours</a></li>
                        <li><a href="#help-dialog-spatial-groups">Timepoint Tours</a></li>
                        <li><a href="#help-dialog-map-editor">Map editor</a></li>
                        <li><a href="#help-dialog-settings">Settings Dialog</a></li>
                        <li><a href="#help-dialog-templates">Copy Vertices</a></li>
                        <li><a href="#help-dialog-export">Exporting the project</a></li>
                    </ol>

                    <!-- Importing Files -->
                    <h3 id="help-dialog-import">Importing Project</h3>
                    <p>The first thing to do is importing the directory containing all the image files and the description file (tour.json). The latter one must be a direct child of the chosen directory. </p>

                    <!-- Navigation Elements -->
                    <h3 id="help-dialog-navigation">Navigation Elements</h3>
                    <table class="table">
                        <tbody>
                            <tr class="row">
                                <td>
                                    <ul class="nav nav-pills" style="background-color:black; padding:5px">
                                        <li><a class="btn topbar-nav-item" style="padding: 5px;"><span class="glyphicon glyphicon-save-file"></span></a></li>
                                        <li><a class="btn topbar-nav-item" style="padding: 5px;"><span class="glyphicon glyphicon-share-alt" style="transform:matrix(-0.9397,0.342,0.342,0.9397,0,0)"></span></a></li>
                                        <li><a class="btn topbar-nav-item" style="padding: 5px;"><span class="glyphicon glyphicon-share-alt" style="transform:rotate(20deg)"></span></a></li>
                                        <li><a class="btn topbar-nav-item" style="padding: 5px;"><span class="glyphicon glyphicon-cog"></span></a></li>
                                        <li><a class="btn topbar-nav-item" style="padding: 5px;"><span class="glyphicon glyphicon-question-sign"></span></a></li>
                                        <li style="">
                                            <a class="btn topbar-nav-item" style="padding: 5px;">
                                                <span class="glyphicon glyphicon-alert">                                  </span>
                                            </a>
                                        </li>
                                    </ul>
                                </td>
                                <td>
                                    <p>
                                        Location: Top left of the screen.
                                    </p><p>
                                        Effect: Save the tour, undo the current action, redo the last undone action, open the popup dialog for settings, help or errors.
                                    </p>
                                </td>
                            </tr>
                            <tr class="row">
                                <td>
                                    <div class="nav nav-pills" style="background-color:black; padding:5px">
                                        <a class="btn"><span class="glyphicon glyphicon-chevron-left"></span></a>
                                        <a class="btn topbar-nav-item"><span class="glyphicon glyphicon-chevron-right"></span></a>
                                    </div>
                                </td>
                                <td>
                                    <p>
                                        Location: Top left of the screen.
                                    </p><p>
                                        Effect: Hide or show the sidebar.
                                    </p>
                                </td>
                            </tr>
                            <tr class="row">
                                <td>
                                    <div class="left" style="background-color:black; color:white">
                                        <span class="glyphicon glyphicon-chevron-left" style=""></span>
                                        <span class="text" style="">2017</span>
                                    </div>
                                    <div class="right" style="background-color:black; color:white">
                                        <span class="text" style="">2019</span>
                                        <span class="glyphicon glyphicon-chevron-right" style=""></span>
                                    </div>
                                </td>
                                <td>
                                    <p>
                                        Location: Top left and top right of the screen.
                                    </p><p>
                                        Effect: Switch between panoramas that were shot at the same spot earlier or later in time.
                                    </p>
                                </td>
                            </tr>
                            <tr class="row">
                                <td>
                                    <div class="float-center" style="left: calc(50% - 15px);
width: 30px;
height: 30px;
color: white;
background-color: black;
display: block;
bottom: 0;"><span class="glyphicon glyphicon-menu-up fill"></span></div>
                                </td>
                                <td>
                                    <p>
                                        Location: Center bottom of the screen.
                                    </p><p>
                                        Effect: Shows the timeline.
                                    </p>
                                </td>
                            </tr>
                            <tr class="row">
                                <td>
                                    <div class="float-center" style="left: calc(50% - 15px);
width: 30px;
height: 30px;
color: white;
background-color: black;
display: block;
bottom: 0;"><span class="glyphicon glyphicon-menu-down fill"></span></div>
                                </td>
                                <td>
                                    <p>
                                        Location: Top right on the timeline.
                                    </p><p>
                                        Effect: Collapses the timeline.
                                    </p>
                                </td>
                            </tr>
                            <tr class="row">
                                <td>
                                    <div class="leaflet-control-minimap leaflet-bar leaflet-control">
                                        <a class="leaflet-control-minimap-button leaflet-bar-part" style="outline: currentcolor none medium;"></a>
                                        <a class="leaflet-control-minimap-button leaflet-bar-part" href="#" title="Shrink to minimap" style="outline: currentcolor none medium;background-position: 0px -25px;"></a>
                                    </div>

                                </td>
                                <td>
                                    <p>
                                        Location: Top left on the map.
                                    </p><p>
                                        Effect: Maximizes / minimizes the map and panorama view.
                                    </p>
                                </td>
                            </tr>
                            <tr class="row">
                                <td>
                                    <svg height="30" width="30">
                                        <path stroke="red" stroke-opacity="1" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="#f03" fill-opacity="0.5" fill-rule="evenodd" style="box-sizing:border-box;
display: inline;
float: none;
line-height: 18px" d="M10,15a4,4 0 1,0 8,0 a4,4 0 1,0 -8,0"></path>
                                    </svg>
                                </td>
                                <td>
                                    <p>
                                        Location: Map.
                                    </p><p>
                                        Effect: Shows the panorama at that location.
                                    </p>
                                </td>
                            </tr>
                            <tr class="row">
                                <td>
                                    <span class="glyphicon glyphicon-menu-up" style="font-size: 4em;color: whitesmoke; background-color:black;"></span>
                                </td>
                                <td>
                                    <p>
                                        Location: Panorama view.
                                    </p><p>
                                        Effect: Shows the next panoram in the pointed direction.
                                    </p>
                                </td>
                            </tr>
                            <tr class="row">
                                <td>
                                    <div class="timeline-item timeline-point timeline-readonly" style="background-color:black"><div class="timeline-item-content" style="margin-left: 32px;">2018</div><div class="timeline-item timeline-dot timeline-readonly" style="top: 7px; left: 8px;"></div></div>
                                </td>
                                <td>
                                    <p>
                                        Location: Timeline.
                                    </p><p>
                                        Effect: Switches to that moment in time (affects currently shown panorama and points on the map).
                                    </p>
                                </td>

                            </tr>
                            <tr class="row">
                                <td>
                                    <div class="timeline-item timeline-range timeline-readonly" style=" width: 90px; top: 5px;position: relative;"><div class="timeline-item-overflow"><div class="timeline-item-content" style="transform: translateX(0px);">2016 - 2019</div></div><div class="timeline-item-visible-frame"></div></div>
                                </td>
                                <td>
                                    <p>
                                        Location: Timeline.
                                    </p><p>
                                        Aggregated stack of timeline items. Zoom closer to see individual items.
                                    </p>
                                </td>

                            </tr>
                            <tr class="row">
                                <td>
                                    <div class="savetiles leaflet-bar leaflet-control"><a class="savetiles"><i class="glyphicon glyphicon-download-alt" title="Save tiles"></i></a><a class="rmtiles"><i class="glyphicon glyphicon-trash" aria-hidden="true" title="Remove tiles"></i></a></div>
                                </td>
                                <td>
                                    <p>
                                        Location: Top left on the map.
                                    </p><p>
                                        Effect: Store (or delete) the current map view in the browser storage. The map can be viewed offline afterwards (even after restarting the browser or system).
                                    </p>
                                </td>
                            </tr>

                            <tr class="row">
                                <td>
                                    <div class="leaflet-control-layers leaflet-control" aria-haspopup="true"><a class="leaflet-control-layers-toggle leaflet-layerstree-named-toggle" href="#" title="Layers">Satellite</a></div>
                                </td>
                                <td>
                                    <p>
                                        Location: Top right on the map.
                                    </p><p>
                                        Effect: Shows the control for the map layers. "GPS" turns GPS tracking on and shows your current position as a white circle on the map (center + uncertainty radius). "Connections" shows lines between points on the map (you can navigate between those panoramas).
                                    </p>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- Creating and modifying tours -->
                    <h3 id="help-dialog-workflow">Creating and modifying tours</h3>
                    <h4>Start a new project</h4>
                    <ol>
                        <li>On the pop-up: Drop the root folder on the droparea or choose it via the topmost button.</li>
                        <li>On the left sidebar: Click "Create tour" under the "Time Travel Tour" section.</li>
                        <li>On the pop-up: Enter a name and click "create" (keep the default value in the other fields).</li>
                        <li>Zoom the map to the location of the tour (use mouse wheel and grabbing functionality)</li>
                        <li>Open the settings dialog (cogwheel left on the topbar).</li>
                        <li>On the pop-up: Click "Set" next to "Initial center" and "Initial zoom level"</li>
                        <li>Close the pop-up.</li>
                        <li>On the topbar: Click the download icon to save the tour as a file. You must save the file to the root folder selected in step 2. Do this regularly (by overwriting the file)!</li>
                    </ol>
                    <h4>Add a panorama</h4>
                    <ol>
                        <li>On the left sidebar: Click "Add Panoramas" under the "Time Travel Tour" section.</li>
                        <li>On the pop-up: Click the "Browser" tab.</li>
                        <li>On the directory tree: Use the triangle on the left hand side of a folder to expand it.</li>
                        <li>On the directory tree: Click on the image file</li>
                        <li>On the pop-up: Click "select"</li>
                        <li>A red point appears on the map and the panorama is displayed (may take a few seconds).</li>
                    </ol>
                    <h4>Specify coordinates and north of a panorama</h4>
                    <p>On the left sidebar: Click the "Panorama" tab.</p>
                    <p>The manual way:</p>
                    <ul>
                        <li>On the map: Drag the blue marker to the correct position where the panorama was shot.</li>
                        <li>On the panorama: Drag the blue hotspot such that it points north.</li>
                    </ul>
                    <p>Automatically derive those values:</p>
                    <ol>
                        <li>Open the settings dialog (cogwheel left on the topbar).</li>
                        <li>On the pop-up: Tick "Create point when clicking on map"</li>
                        <li>Close the pop-up.</li>
                        <li>On the map: Click on one landmark that you can also see on the panorama (i.e. top of the roof, tree).</li>
                        <li>On the panorama: Drag the green hotspot onto the landmark (only the positioning along the horizontal axis matters).</li>
                        <li>Do the procedure for 4 more landmarks (the more precise you can position them on the map and on the panorama, the better).</li>
                        <li>On the left sidebar: Click "optimize".</li>
                    </ol>
                    <h4>Connect individual panoramas</h4>
                    <ol>
                        <li>On the left sidebar: Click the "Groups" tab.</li>
                        <li>On the left sidebar: Select a timepoint tour from the dropdown.</li>
                        <li>On the left sidebar: Select "Draw Line" as "Editing mode" from the dropdown (select "Load Panorama" to get the default behavior when clicking on points on the map).</li>
                        <li>On the map: Click two red points. A blue line will appear.</li>
                    </ol>
                    <h4>Modify the tour</h4>
                    <ul>
                        <li>On the topbar: The arrow pointing to the left is an undo button.</li>
                        <li>On the left sidebar: Select a timepoint tour to add and remove connections between panoramas.</li>
                        <li>On the map: Delete lines by clicking on them (only works for blue and green ones).</li>
                        <li>On the left sidebar: Select "Delete point" and click on a point on the map to delete it (and the associated panorama; the actual image file will be unaffected). Immediately select "Load Panorama" afterwards to prevent deleting other points by mistake.</li>
                    </ul>

                    <!-- Time Travel Tours -->
                    <h4 id="help-dialog-temporal-groups">Time Travel Tours</h4>
                    <p>A time travel tour consists of several timepoint tours. The time travel tour makes the navigation in time possible. If two panoramas are taken at the same location but at different times, they end up in different timepoint tours. The time travel tour searches all containing timepoint tours and forms a connection between those two panoramas. The result is one can switch between them using the topbar navigation.</p>
                    <p>A time travel tour only requires a name and a type. The type determines the subgroups that can be added to the tour. All the other values are optional. The description will be used as a tooltip. The super tour dropdown exists that one can build a hierarchy of tours.</p>
                    <p>The connections for navigating in time cannot be created manually. Instead the time travel tour automatically takes care of it. Two vertices are navigable in time (there are arrows in the top bar) if they are colocated. To be colocated, they must be within the distance determined by the parameter colocated radius. Moreover their timepoint tours must be of type &quot;singleshot&quot; OR belong to the same time travel tour. One can deny the first condition by choosing the type &quot;route&quot; for the timepoint tour and the second condition by unchecking the &quot;auto-connect&quot; option when creating a tour.</p>
                    <p>&quot;Add Panoramas&quot; will automatically create a timepoint tour derived from timestamp of the specified image. Create a timepoint tour manually to exploit all customization options.</p>
                    <p>There is no possibility to directly modify groups. The workaround is to create a new one and copy the timepoint tours, see <a href="#help-dialog-spatial-groups">Timepoint Tours</a>.</p>

                    <!-- Timepoint Tours -->
                    <h4 id="help-dialog-spatial-groups">Timepoint Tours</h4>
                    <p>A timepoint tour consists of several panoramas. All of them are shot roughly at the same time. The purpose is to have a common timeslot and name that can be displayed on the timeline.</p>
                    <p>A timepoint tour requires a name, a timeslot, a super tour and a type. The type determines the type of vertices that can be added to the tour. See the third paragraph in <a href="#help-dialog-spatial-groups">Time Travel Tours</a> for the purpose of &quot;route&quot; and &quot;singleshot&quot; Path and description are optional. The description will be used as a tooltip. The path is used to specify a parent folder so that the path saved for the vertices only contains the filename.</p>
                    <p>There is no possibility to directly modify groups. The workaround is to create a new one and copy the vertices. To do so, do the following:</p>
                    <ol>
                        <li>On the sidebar: Click &quot;Create Tour&quot; under the Timepoint Tour section.</li>
                        <li>On &quot;Timepoint Tour Editor&quot;: Enter the modified values and click &quot;create&quot;.</li>
                        <li>On the sidebar: The new tour should now be selected in the dropdown.</li>
                        <li>On the sidebar: Click &quot;Copy Vertices&quot;</li>
                        <li>On &quot;Apply Tour Template&quot;: Select the old tour as the destination.</li>
                        <li>On &quot;Apply Tour Template&quot;: Click &quot;Edit options for copying vertices&quot;.</li>
                        <li>On &quot;Vertex Copy Options&quot;: Ensure that all options are checked and all types selected. The functionality is explained in the <a href="#help-dialog-templates">Copy Vertices</a> section.</li>
                        <li>Close the &quot;Vertex Copy Options&quot; pop-up</li>
                        <li>On &quot;Apply Tour Template&quot;: Click &quot;Apply Template&quot;.</li>
                    </ol>

                    <!-- Map Editor -->
                    <h4 id="help-dialog-map-editor">Map Editor</h4>
                    <p>The map editor can be found in between the &quot;Groups&quot; and &quot;Panorama&quot; editors. The map editor allows adding custom overlays to the map, here called backgrounds. The purpose is to show plans of buildings, paths, etc. To create such a background one has to click &quot;Create Background&quot; and choose an image file - just like for adding a panorama. Its name is automatically derived from the name of the file.</p>
                    <p>Use the upper left marker (the anchor) to bring the background to the correct position. The other two markers change scale (horizontal and vertical separately) and rotate around the anchor. If one selects &quot;Edit Skew&quot; the markers can be moved without interdependencies. This means the other two markers stay at the same position and the image will be skewed.</p>
                    <p>Afterwards, the background should be assigned to a timepoint tour. Therefore, create a new timepoint tour and choose &quot;Advanced Settings&quot; &rarr; &quot;Background&quot;. A background can be assigned to multiple timepoint tours. Whenever one of these groups is selected in the timeline, the background is displayed. On can hide all backgrounds via the layer control in the upper right corner of the map.</p>


                    <!-- Settings Dialog -->
                    <h4 id="help-dialog-settings">Settings Dialog</h4>
                    <p>The settings are subdivided into three tabs.</p>
                    <ul>
                        <li>Files: The "Import additional tour files" button allows to load tour.json files from outside the source folder. All the groups, vertices and edges specified in the file will be merged into the current tour. Elements that already exist remain untouched (they do not get updated). This is useful when you want to merge tours from several working directories into one. Keep in mind that you manually have to copy the image files to the correct location. Another use case is reusing landmarks. When saving selected items is selected, the currently selected tiempoint tour will be saved. This affects which points are shown on the map at startup.</li>

                        <li>View: In the lower section, one can limit to which extend the map and timeline can be paned and zoomed. Moreover one can specify which part of the map, timeline and panorama is shown on startup. All the settings are stored in the tour file of the workspace. They are read and applied when you load a tour file. The current pan and zoom values of the map / panorama view / timeline determine the values when clicking "Set". "Unset" is clickable when there is a value specified. To overwrite the value click "Set" again. Enabling &quot;Update all initial view parameters when saving &quot; will set the initial view to the current view when saving the workspace.</li>
                        <li>Advanced: Here, one can unlock more powerful tools like copying the vertices of timepoint tours (see <a href="#help-dialog-templates">Copy Vertices</a>) or rescanning the workspace for new files which will then be added as panoramas.</li>
                    </ul>

                    <!-- Copy Vertices -->
                    <h4 id="help-dialog-templates">Copy Vertices</h4>
                    <p>To unlock this option, go to setting, advanced and check &quot;Enable batch copying of vertices&quot;</p>
                    <p>This section describes the internal procedure for copying vertices. See the end of the <a href="#help-dialog-spatial-groups">Timepoint Tours</a> section on how to apply it.</p>
                    <p>We iterate over all the vertices of the source tour. We check whether there is a corresponding vertex in the destination tour. If "update colocated" is checked all vertices within the connection radius are considered "corresponding". The closest one is chosen. If unchecked, the coordinates must be identical.</p>
                    <p>A new vertex is created if "create" is checked, there is no corresponding vertex and the type of the vertex is one of the selected types.</p>
                    <p>An existing vertex is updated, if "update is checked, there is a corresponding vertex and the type of the vertex is one of the selected types.</p>
                    <p>Only the selected values (via the checkboxes "coordinates", "image attributes", vertex.data."northOffset", vertex.data."vOffset", vertex.data."vaov", and vertex.data."type") are used for creation or update.</p>
                    <p>Afterwards, the edges are handled. The procedure is merely the same. Searching for corresponding vertices is also performed, for start and end of the edge. Based on start and end the corresponding edge is determined.</p>
                    <p>The type of the vertex / edge cannot be copied since it is derived (for instance a vertex of type "panorama" becomes "placeholder" when the image attributes are not copied).</p>

                    <!-- Exporting Project -->
                    <h3 id="help-dialog-export">Exporting the project</h3>
                    <p>Open settings, file and click &quot;Export Project&quot;. The export dialog is not available when run in browser.</p>
                    <p>The main purpose of the export dialog is to tile the panorama image into samller ones. The advantage is that panoramas are loaded much faster and require less bandwidth to be displayed. To speed up the export process, increse the number of threads. But keep in mind that this requires more main memory. When maximum width or maximum height is set, the base image is resized (but aspect ratio kept) in memory before tiling.</p>
                    <p>Once the export is started, one can abort it any time. The processed panoramas are then kept and one can resume by starting a new export to the same destination. If the progress window is closed while the export is running, opening the export dialog will open the progress dialog.</p>
                </div>
            </div>
        </div>
    </div>
    <!-- /#help-dialog -->
    <!-- #save-tiles-dialog -->
    <div id="save-tiles-dialog" class="modal fade" role="dialog" tabindex="-1" aria-hidden="true" style="display: none;">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4>Saving tiles</h4>
                </div>
                <div class="modal-body">
                    Progress: <span id="save-tiles-progress"></span>/<span id="save-tiles-total"></span>
                </div>
            </div>
        </div>
    </div>
    <!-- /#save-tiles-dialog -->
</body>
</html>
